local_address = "http://127.0.0.1:8080/"
security_level = "strict"
prefer_http_handshake = false

[listen]

[listen.http]
bind = "0.0.0.0:8080"
path = "/"

# Optional HTTPS listener
# [listen.https]
# bind = "0.0.0.0:8443"
# path = "/"
# cert_path = "certs/server.crt"
# key_path = "certs/server.key"

[listen.udp]
bind = "0.0.0.0:9000"
service = "cmr"

# Optional SMTP inbound listener (for mailto: local addresses)
# [listen.smtp]
# bind = "0.0.0.0:2525"
# max_message_bytes = 4194304

[compressor]
command = "cmr-compressor"
args = []
max_frame_bytes = 8388608

# Optional SMTP client transport (for mailto: destinations)
# [smtp]
# relay = "smtp.example.com"
# port = 587
# allow_insecure = false
# from = "cmr@example.com"
# username = "cmr@example.com"
# password_env = "CMR_SMTP_PASSWORD"

[ssh]
binary = "ssh"
default_remote_command = "cmr-peer receive-stdin --config /etc/cmr-peer.toml --transport ssh"

[dashboard]
enabled = false
path = "/_cmr"
# Optional HTTP Basic credentials required for all dashboard/API requests.
# auth_username = "operator"
# auth_password = "change-me"

[web_client]
enabled = false
path = "/_cmr_client"
# Require HTTPS for non-localhost access to public client UI/API.
require_https = true

[ambient]
# Optional first-hop peers used for blank-destination compose.
seed_peers = []
# Maximum ambient seed fanout per compose action.
seed_fanout = 8

[storage]
# Enable message persistence (default false).
enabled = false
# Absolute path to the zpaq archive for message persistence.
# Must be set to an absolute path; empty string disables startup until configured.
path = ""
# Maximum bytes to load into memory when restoring.
max_restore_bytes = 268435456

# Optional static pairwise keys:
# [[static_keys]]
# peer = "http://peer-a.example/cmr"
# hex_key = "666f6f626172313233"
